{% extends "base.html" %}

{% block title %}Professor Jiseon Yang - Publications{% endblock %}

{% block content %}
<h1 class="mb-4">Publications</h1>

<section class="section">
    <div class="timeline-container">
        <h2>Research Timeline</h2>
        <img src="{{ url_for('static', filename='images/publications/timeline.png') }}" alt="Research Timeline" class="timeline-image">
    </div>

    <style>
        .timeline-container {
            margin-bottom: 40px;
        }

        .timeline-image {
            width: 100%;
            height: auto;
            max-width: 1200px;
            display: block;
            margin: 0 auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        body {
            background-color: #1c1c1c;
            color: #e0e0e0;
        }

        .publication-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .button-container {
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .filter-button {
            background-color: #2b2b2b;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            flex: 1 1 auto;
            max-width: 150px;
        }

        .filter-button.active {
            background-color: #005bb5;
        }

        .filter-button:hover {
            background-color: #404040;
        }

        .publication-box {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .box {
            background-color: #2b2b2b;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        }

        .box img {
            width: 100%;
            height: auto;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .box a {
            color: #0073e6;
            font-weight: bold;
            text-decoration: none;
            display: block;
            margin-bottom: 10px;
        }

        .box a:hover {
            color: #66b2ff;
        }

        .box p {
            color: #cccccc;
            font-size: 14px;
            line-height: 1.6;
        }

        .journal-name-box {
            background-color: #1a1a1a;
            padding: 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
            color: #e0e0e0;
        }
    </style>

    <div class="publication-container">
        <div class="button-container">
            <button class="filter-button active" onclick="filterPublications('all')">All</button>
            <button class="filter-button" onclick="filterPublications('peer-reviewed')">Peer-Reviewed</button>
            <button class="filter-button" onclick="filterPublications('book-chapters')">Book Chapters</button>
            <button class="filter-button" onclick="filterPublications('research-activity')">Research Activity</button>
        </div>

        <div class="button-container year-filters">
            <button class="filter-button" onclick="filterByYear('all')">All Years</button>
            <button class="filter-button" onclick="filterByYear('2024')">2024</button>
            <button class="filter-button" onclick="filterByYear('2023')">2023</button>
            <button class="filter-button" onclick="filterByYear('2022')">2022</button>
            <button class="filter-button" onclick="filterByYear('2021')">2021</button>
            <button class="filter-button" onclick="filterByYear('2018')">2018</button>
            <button class="filter-button" onclick="filterByYear('2017')">2017</button>
            <button class="filter-button" onclick="filterByYear('2016')">2016</button>
        </div>

        <div class="publication-box">
            <!-- Publication entries remain the same -->
            {% include 'publication_entries.html' %}
        </div>
    </div>
</section>

<script>
    let currentCategory = 'all';
    let currentYear = 'all';

    function filterPublications(category) {
        currentCategory = category;
        updateDisplay();
        
        // Update active state of category buttons
        document.querySelectorAll('.button-container:not(.year-filters) .filter-button').forEach(button => {
            button.classList.remove('active');
            if (button.textContent.toLowerCase().includes(category.toLowerCase())) {
                button.classList.add('active');
            }
        });
    }

    function filterByYear(year) {
        currentYear = year;
        updateDisplay();
        
        // Update active state of year buttons
        document.querySelectorAll('.year-filters .filter-button').forEach(button => {
            button.classList.remove('active');
            if (button.textContent.includes(year)) {
                button.classList.add('active');
            }
        });
    }

    function updateDisplay() {
        const boxes = document.querySelectorAll('.box');
        boxes.forEach(box => {
            const matchesCategory = currentCategory === 'all' || box.classList.contains(currentCategory);
            const matchesYear = currentYear === 'all' || box.getAttribute('data-year') === currentYear;
            box.style.display = matchesCategory && matchesYear ? 'block' : 'none';
        });
    }

    // Initialize with all publications shown
    document.addEventListener('DOMContentLoaded', () => {
        filterPublications('all');
        filterByYear('all');
    });
</script>
{% endblock %}
